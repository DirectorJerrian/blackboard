{"version":3,"sources":["..\\..\\..\\assets/assets\\login.js"],"names":["cc","Class","extends","Component","properties","result","default","type","Label","email","EditBox","password","login","_http","http","accountNode","director","getScene","getChildByName","account","getComponent","information","string","res","code","setid","data","id","setname","name","setemail","setdepartment","department","get","res2","setclass","node","runAction","sequence","delayTime","callFunc","loadScene","start"],"mappings":";;;;;;AASA;;;;;;AAA2B;AAC3BA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAO;AACHC,qBAAQ,IADL;AAEHC,kBAAKP,GAAGQ;AAFL,SADC;AAKRC,eAAM;AACFH,qBAAQ,IADN;AAEFC,kBAAKP,GAAGU;AAFN,SALE;AASRC,kBAAS;AACLL,qBAAQ,IADH;AAELC,kBAAKP,GAAGU;AAFH;;AAKT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5BQ,KAHP;;AAkCL;;AAEA;;;AAGAE,WAAM,iBAAU;AAAA;;AACZ,YAAIC,QAAQ,IAAIC,cAAJ,EAAZ;AACA,YAAIC,cAAcf,GAAGgB,QAAH,CAAYC,QAAZ,GAAuBC,cAAvB,CAAsC,SAAtC,CAAlB;AACA,YAAIC,UAAUJ,YAAYK,YAAZ,CAAyB,SAAzB,CAAd;;AAEA,YAAIC,cAAY,EAAhB;AACAA,oBAAY,CAAZ,IAAe,KAAKZ,KAAL,CAAWa,MAA1B;AACAD,oBAAY,CAAZ,IAAe,KAAKV,QAAL,CAAcW,MAA7B;;AAEAT,cAAMD,KAAN,CAAY,iBAAZ,EAA8BS,WAA9B,EAA0C,UAACE,GAAD,EAAO;AAC7C,gBAAGA,IAAIC,IAAJ,IAAU,CAAC,CAAd,EAAgB;AACZ,sBAAKnB,MAAL,CAAYiB,MAAZ,GAAmB,UAAnB;AACA,sBAAKb,KAAL,CAAWa,MAAX,GAAkB,EAAlB;AACA,sBAAKX,QAAL,CAAcW,MAAd,GAAqB,EAArB;AACH,aAJD,MAIK;AACDH,wBAAQM,KAAR,CAAcF,IAAIG,IAAJ,CAASC,EAAvB;AACAR,wBAAQS,OAAR,CAAgBL,IAAIG,IAAJ,CAASG,IAAzB;AACAV,wBAAQW,QAAR,CAAiBP,IAAIG,IAAJ,CAASjB,KAA1B;AACAU,wBAAQY,aAAR,CAAsBR,IAAIG,IAAJ,CAASM,UAA/B;AACAnB,sBAAMoB,GAAN,CAAU,YAAUV,IAAIG,IAAJ,CAASC,EAA7B,EAAgC,CAAhC,EAAkC,UAACO,IAAD,EAAQ;AAACf,4BAAQgB,QAAR,CAAiBD,KAAKR,IAAtB;AAA6B,iBAAxE;AACA,sBAAKU,IAAL,CAAUC,SAAV,CAAoBrC,GAAGsC,QAAH,CAAYtC,GAAGuC,SAAH,CAAa,GAAb,CAAZ,EAA8BvC,GAAGwC,QAAH,CAAY,YAAU;AAACxC,uBAAGgB,QAAH,CAAYyB,SAAZ,CAAsB,GAAtB;AAA2B,iBAAlD,CAA9B,CAApB;AACH;AACJ,SAbD;AAeH,KA/DI;;AAiELC,SAjEK,mBAiEI,CAER;AAnEI;;AAqEL;AArEJ,GAVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.js","sourceRoot":"..\\..\\..\\assets","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nimport http from \"./http\"; //引入模块\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        result:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        email:{\r\n            default:null,\r\n            type:cc.EditBox\r\n        },\r\n        password:{\r\n            default:null,\r\n            type:cc.EditBox\r\n        },\r\n\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    //onLoad:function () {},\r\n\r\n    \r\n    login:function(){\r\n        let _http = new http();\r\n        var accountNode = cc.director.getScene().getChildByName('Account');\r\n        var account = accountNode.getComponent('account');\r\n\r\n        var information=[];\r\n        information[0]=this.email.string;\r\n        information[1]=this.password.string;\r\n\r\n        _http.login(\"/session/create\",information,(res)=>{\r\n            if(res.code==-1){\r\n                this.result.string=\"邮箱或密码错误！\";\r\n                this.email.string=\"\";\r\n                this.password.string=\"\";\r\n            }else{\r\n                account.setid(res.data.id);\r\n                account.setname(res.data.name);\r\n                account.setemail(res.data.email);\r\n                account.setdepartment(res.data.department);\r\n                _http.get(\"/class/\"+res.data.id,0,(res2)=>{account.setclass(res2.data);})\r\n                this.node.runAction(cc.sequence(cc.delayTime(0.1),cc.callFunc(function(){cc.director.loadScene(\"我\")})));\r\n            }\r\n        })\r\n        \r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}