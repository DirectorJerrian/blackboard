{"version":3,"sources":["..\\..\\..\\assets/assets\\go to login.js"],"names":["cc","Class","extends","Component","properties","lableInButton","default","type","Label","welcome","department","email","yourClass","classInput","EditBox","complete","Button","classNumberIput","nameLable","numberLable","toScene","account","director","getScene","getChildByName","id","getComponent","getid","node","runAction","sequence","fadeOut","callFunc","loadScene","_http","http","logout","res","code","setid","delayTime","onLoad","x","string","getname","getemail","getdepartment","n","result","console","log","getclass","get","res2","setclass","data","length","name","start"],"mappings":"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","file":"go to login.js","sourceRoot":"..\\..\\..\\assets","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nimport http from \"./http\"; //引入模块\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        lableInButton:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        welcome:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        department:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        email:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        yourClass:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        classInput:{\r\n            default:null,\r\n            type:cc.EditBox\r\n        },\r\n        complete:{\r\n            default:null,\r\n            type:cc.Button\r\n        },\r\n        classNumberIput:{\r\n            default:null,\r\n            type:cc.EditBox\r\n        },\r\n        nameLable:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        numberLable:{\r\n            default:null,\r\n            type:cc.Label\r\n        }\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    toScene:function(){\r\n        var account = cc.director.getScene().getChildByName('Account');\r\n        var id = account.getComponent('account').getid();\r\n        if(id==null){\r\n            this.node.runAction(cc.sequence(cc.fadeOut(0.5),cc.callFunc(function(){cc.director.loadScene('登录')})));\r\n        }else{\r\n            let _http = new http();\r\n            _http.logout((res)=>{\r\n                if(res.code==0){\r\n                    account.getComponent('account').setid(null);\r\n                    this.node.runAction(cc.sequence(cc.fadeOut(0.5),cc.callFunc(function(){cc.director.loadScene('登录')})));\r\n                }else{\r\n                    this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){cc.director.loadScene('登录')})));\r\n                }\r\n            })\r\n            \r\n        }\r\n    },\r\n\r\n    onLoad: function() {\r\n        this.classInput.node.x=6666;\r\n        this.complete.node.x=6666;\r\n        this.classNumberIput.node.x=6666;\r\n        this.nameLable.node.x=-6666;\r\n        this.numberLable.node.x=-6666;\r\n        var account = cc.director.getScene().getChildByName('Account').getComponent('account');\r\n        var id = account.getid();\r\n        if(id==null){\r\n            this.welcome.string=\"Please login first!\";\r\n            this.email.string=\"\";\r\n            this.department.string=\"\";\r\n            this.yourClass.string=\"\";\r\n            this.lableInButton.string=\"登录\";\r\n        }else{\r\n            this.welcome.string=\"欢迎！\"+account.getname();\r\n            this.email.string=\"邮箱：\"+account.getemail();\r\n            this.department.string=\"所在院系：\"+account.getdepartment();\r\n            var n=0;\r\n            var result=\"\";\r\n            console.log(account.getclass());\r\n            let _http=new http();\r\n            _http.get(\"/class/\"+id,0,(res2)=>{account.setclass(res2.data);})\r\n            console.log(1);\r\n            if(account.getclass()!=null && account.getclass()!=\" \"){\r\n                while(n<account.getclass().length){\r\n                    result=result+account.getclass()[n].name+\":\"+account.getclass()[n].code+\"\\n\";\r\n                    n++;\r\n                }\r\n            }else{\r\n                result=\"您尚未加入任何班级！\";\r\n            }\r\n            this.yourClass.string=result;\r\n            this.lableInButton.string=\"注销\";\r\n        }\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}